function K(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))c(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&c(u)}).observe(document,{childList:!0,subtree:!0});function e(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(r){if(r.ep)return;r.ep=!0;const o=e(r);fetch(r.href,o)}})();function A(t){let s=JSON.parse(localStorage.getItem("cart"))||[];const e=s.find(c=>c.id===t.id);e?e.quantity+=1:s.push(t),localStorage.setItem("cart",JSON.stringify(s)),$()}function $(){const t=JSON.parse(localStorage.getItem("cart"))||[],s=document.querySelector(".control__btn_cart");if(s){const e=t.reduce((c,r)=>c+r.quantity,0);s.textContent=e}N()}function N(){const t=JSON.parse(localStorage.getItem("cart"))||[],s=document.querySelector(".cart-items");s&&(s.innerHTML="",t.forEach(e=>{const c=document.createElement("div");c.className="cart-item",c.innerHTML='\n      <div class="cart-item__image">\n        <img src="assets/images/products/'.concat(e.image,'" alt="').concat(e.name,'">\n      </div>\n      <div class="cart-item__info">\n        <div class="cart-item__name">').concat(e.name,'</div>\n        <div class="cart-item__price">').concat(e.price,' ₽</div>\n      </div>\n      <div class="cart-item__controls">\n        <button class="cart-item__decrease" type="button">-</button>\n        <span class="cart-item__quantity">').concat(e.quantity,'</span>\n        <button class="cart-item__increase" type="button">+</button>\n      </div>\n      <button class="cart-item__remove" type="button">\n        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M1 1L13 13M13 1L1 13" stroke="currentColor" stroke-width="2"/>\n        </svg>\n      </button>\n    '),s.appendChild(c)}),g(),p())}function g(){let t=0;document.querySelectorAll(".cart-item").forEach(e=>{const c=e.querySelector(".cart-item__price"),r=e.querySelector(".cart-item__quantity"),o=parseInt(c.textContent.replace(/\D/g,"")),u=parseInt(r.textContent);t+=o*u}),document.querySelector(".cart-total__price").textContent=t+" ₽"}function p(){let t=0;const s=document.querySelector(".control__btn_cart");document.querySelectorAll(".cart-item__quantity").forEach(r=>t+=Number(r.textContent));const c=document.querySelector(".cart-count");c.textContent="".concat(t," товаров"),s.textContent=t}function y(t,s){const e=JSON.parse(localStorage.getItem("cart"))||[],c=t.querySelector(".cart-item__name").textContent,r=e.findIndex(o=>o.name===c);r!==-1&&(s==="increase"?e[r].quantity+=1:s==="decrease"?e[r].quantity-=1:s==="remove"&&e.splice(r,1),localStorage.setItem("cart",JSON.stringify(e)))}const M="687f44aeefe65e5200890472",T="https://".concat(M,".mockapi.io/api/v1/paints"),B=async()=>{try{return(await axios.get(T)).data}catch(t){throw console.error("Error fetching paints:",t),t}},w=document.querySelector(".catalog__products");function S(t){w.innerHTML="";const s=document.createDocumentFragment();t.forEach(e=>{const c=document.createElement("div");c.className="card",c.dataset.product="data-product",c.dataset.id=e.id,c.dataset.name=e.name,c.dataset.price=e.price,c.dataset.image="images/products/".concat(e.image),c.innerHTML='\n      <div class="card__image-container">\n        <img src="/assets/images/products/'.concat(e.image,'" alt="').concat(e.alt,'" class="card__image" loading="lazy">\n      </div>\n      <div class="card__content">\n        <p class="card__name">').concat(e.name,'</p>\n        <div class="card__description">\n          <p class="card__price">').concat(e.price,' ₽</p>\n          <button class="card__add-to-cart" type="button" aria-label="Add to cart">+</button>\n        </div>\n      </div>\n    '),c.querySelector(".card__add-to-cart").addEventListener("click",()=>A({id:e.id,name:e.name,price:e.price,image:e.image,quantity:1})),s.appendChild(c)}),w.appendChild(s)}function O(t){const s=t.length;document.querySelector(".count-product").textContent="".concat(s," товар")}async function b(t){return(await B()).filter(c=>c.categories.includes(t))}function q(t,s){let e=[...s];switch(t){case"price-desc":e.sort((c,r)=>r.price-c.price);break;case"price-asc":e.sort((c,r)=>c.price-r.price);break;case"rating-desc":e.sort((c,r)=>r.rating-c.rating);break;case"newest":e.sort((c,r)=>new Date(r.createdAt)-new Date(c.createdAt));break}return e}const m=document.querySelector(".sort-dropdown"),F=m.querySelector(".sort-dropdown__selected"),J=m.querySelector(".sort-dropdown__current"),x=m.querySelectorAll(".sort-dropdown__item");let f="price-desc",v="new";F.addEventListener("click",t=>{t.stopPropagation(),m.classList.toggle("sort-dropdown__active")});document.addEventListener("click",t=>{m.contains(t.target)||m.classList.remove("sort-dropdown__active")});x.forEach(t=>{t.addEventListener("click",async()=>{J.textContent=t.textContent,m.classList.remove("sort-dropdown__active"),x.forEach(c=>{c.classList.remove("sort-dropdown__item_selected")}),t.classList.add("sort-dropdown__item_selected"),f=t.dataset.value;const s=await b(v),e=q(f,s);S(e)})});const C=document.querySelector(".header__nav"),D=document.querySelectorAll(".nav__item"),L=document.querySelector(".burger"),_=document.querySelector(".wrapper"),i=document.body,I=document.querySelector(".btn-close_menu");L.addEventListener("click",t=>{(t.target===L||t.target.closest(".burger"))&&(C.classList.toggle("header__nav_active"),_.classList.toggle("menu__active"),i.classList.toggle("stop-scroll"))});D.forEach(t=>{t.addEventListener("click",()=>{C.classList.toggle("header__nav_active"),_.classList.toggle("menu__active"),i.classList.toggle("stop-scroll")})});I.addEventListener("click",t=>{(t.target===I||t.target.closest(".btn-close_menu"))&&(C.classList.toggle("header__nav_active"),_.classList.toggle("menu__active"),i.classList.toggle("stop-scroll"))});const E=document.querySelector(".filter-container"),H=document.querySelectorAll(".filter__item"),P=document.querySelector(".filter-mobile__button"),k=document.querySelector(".btn-close_filter");P.addEventListener("click",t=>{(t.target===P||t.target.closest(".filter-mobile__button"))&&(E.classList.toggle("filter-container_active"),_.classList.toggle("menu__active"),i.classList.toggle("stop-scroll"))});H.forEach(t=>{t.addEventListener("change",async s=>{E.classList.remove("filter-container_active"),_.classList.remove("menu__active"),i.classList.remove("stop-scroll"),v=s.target.id;const e=await b(v),c=q(f,e);O(e),S(c)})});k.addEventListener("click",t=>{(t.target===k||t.target.closest(".btn-close_filter"))&&(E.classList.toggle("filter-container_active"),_.classList.toggle("menu__active"),i.classList.toggle("stop-scroll"))});document.addEventListener("DOMContentLoaded",async function(){const t=document.querySelector(".control__btn_cart"),s=document.querySelector(".cart-close"),e=document.querySelector(".cart-clear"),c=document.querySelectorAll(".card__add-to-cart"),r=document.querySelector(".cart-items");N();const o=await b(v);O(o);const u=q(f,o);S(u),new Swiper(".slider .swiper",{loop:!0,autoplay:{delay:5e3},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),t.addEventListener("click",l=>{(l.target===L||l.target.closest(".control__btn_cart"))&&(i.classList.toggle("cart-open"),i.classList.toggle("stop-scroll"))}),s.addEventListener("click",l=>{(l.target===s||l.target.closest(".cart-close"))&&(i.classList.remove("cart-open"),_.classList.remove("menu__active"),i.classList.toggle("stop-scroll"))}),r.addEventListener("click",l=>{const a=l.target;if(a.classList.contains("cart-item__increase")||a.closest(".cart-item__increase")){const n=a.classList.contains("cart-item__increase")?a:a.closest(".cart-item__increase"),d=n.previousElementSibling;d.textContent=parseInt(d.textContent)+1,g(),p(),y(n.closest(".cart-item"),"increase")}else if(a.classList.contains("cart-item__decrease")||a.closest(".cart-item__decrease")){const n=a.classList.contains("cart-item__decrease")?a:a.closest(".cart-item__decrease"),d=n.nextElementSibling,h=parseInt(d.textContent);h>1&&(d.textContent=h-1,g(),p(),y(n.closest(".cart-item"),"decrease"))}else if(a.classList.contains("cart-item__remove")||a.closest(".cart-item__remove")){const d=(a.classList.contains("cart-item__remove")?a:a.closest(".cart-item__remove")).closest(".cart-item");d.remove(),g(),p(),y(d,"remove")}}),e.addEventListener("click",()=>{document.querySelector(".cart-items").innerHTML="",localStorage.removeItem("cart"),g(),p()}),c.forEach(l=>{l.addEventListener("click",a=>{if(a.target.classList.contains("card__add-to-cart")){const n=a.target.closest(".card");console.log(n),A({id:n.dataset.id,name:n.dataset.name,price:n.dataset.price,image:n.dataset.image,quantity:1})}})})});export{K as __vite_legacy_guard};
