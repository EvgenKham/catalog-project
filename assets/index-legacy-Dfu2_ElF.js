System.register([],function(t,e){"use strict";return{execute:function(){function t(t){let c=JSON.parse(localStorage.getItem("cart"))||[];const a=c.find(e=>e.id===t.id);a?a.quantity+=1:c.push(t),localStorage.setItem("cart",JSON.stringify(c)),function(){const t=JSON.parse(localStorage.getItem("cart"))||[],c=document.querySelector(".control__btn_cart");if(c){const e=t.reduce((t,e)=>t+e.quantity,0);c.textContent=e}e()}()}function e(){const t=JSON.parse(localStorage.getItem("cart"))||[],e=document.querySelector(".cart-items");e&&(e.innerHTML="",t.forEach(t=>{const c=document.createElement("div");c.className="cart-item",c.innerHTML=`\n      <div class="cart-item__image">\n        <img src="assets/images/products/${t.image}" alt="${t.name}">\n      </div>\n      <div class="cart-item__info">\n        <div class="cart-item__name">${t.name}</div>\n        <div class="cart-item__price">${t.price} ₽</div>\n      </div>\n      <div class="cart-item__controls">\n        <button class="cart-item__decrease" type="button">-</button>\n        <span class="cart-item__quantity">${t.quantity}</span>\n        <button class="cart-item__increase" type="button">+</button>\n      </div>\n      <button class="cart-item__remove" type="button">\n        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M1 1L13 13M13 1L1 13" stroke="currentColor" stroke-width="2"/>\n        </svg>\n      </button>\n    `,e.appendChild(c)}),c(),a())}function c(){let t=0;document.querySelectorAll(".cart-item").forEach(e=>{const c=e.querySelector(".cart-item__price"),a=e.querySelector(".cart-item__quantity"),r=parseInt(c.textContent.replace(/\D/g,"")),s=parseInt(a.textContent);t+=r*s}),document.querySelector(".cart-total__price").textContent=t+" ₽"}function a(){let t=0;const e=document.querySelector(".control__btn_cart");document.querySelectorAll(".cart-item__quantity").forEach(e=>t+=Number(e.textContent)),document.querySelector(".cart-count").textContent=`${t} товаров`,e.textContent=t}function r(t,e){const c=JSON.parse(localStorage.getItem("cart"))||[],a=t.querySelector(".cart-item__name").textContent,r=c.findIndex(t=>t.name===a);-1!==r&&("increase"===e?c[r].quantity+=1:"decrease"===e?c[r].quantity-=1:"remove"===e&&c.splice(r,1),localStorage.setItem("cart",JSON.stringify(c)))}const s=document.querySelector(".catalog__products");function n(e){s.innerHTML="";const c=document.createDocumentFragment();e.forEach(e=>{const a=document.createElement("div");a.className="card",a.dataset.product="data-product",a.dataset.id=e.id,a.dataset.name=e.name,a.dataset.price=e.price,a.dataset.image=`assets/images/products/${e.image}`,a.innerHTML=`\n      <div class="card__image-container">\n        <img src="assets/images/products/${e.image}" alt="${e.alt}" class="card__image" loading="lazy">\n      </div>\n      <div class="card__content">\n        <p class="card__name">${e.name}</p>\n        <div class="card__description">\n          <p class="card__price">${e.price} ₽</p>\n          <button class="card__add-to-cart" type="button" aria-label="Add to cart">+</button>\n        </div>\n      </div>\n    `,a.querySelector(".card__add-to-cart").addEventListener("click",()=>t({id:e.id,name:e.name,price:e.price,image:e.image,quantity:1})),c.appendChild(a)}),s.appendChild(c)}function o(t){const e=t.length;document.querySelector(".count-product").textContent=`${e} товар`}async function i(t){return(await(async()=>{try{return(await axios.get("https://687f44aeefe65e5200890472.mockapi.io/api/v1/paints")).data}catch(t){throw console.error("Error fetching paints:",t),t}})()).filter(e=>e.categories.includes(t))}function l(t,e){let c=[...e];switch(t){case"price-desc":c.sort((t,e)=>e.price-t.price);break;case"price-asc":c.sort((t,e)=>t.price-e.price);break;case"rating-desc":c.sort((t,e)=>e.rating-t.rating);break;case"newest":c.sort((t,e)=>new Date(e.createdAt)-new Date(t.createdAt))}return c}document.addEventListener("DOMContentLoaded",async function(){const s=document.querySelector(".control__btn_cart"),d=document.querySelector(".cart-close"),m=document.querySelector(".cart-clear"),_=document.querySelectorAll(".card__add-to-cart"),u=document.querySelector(".cart-items"),g=document.querySelector(".sort-dropdown"),p=g.querySelector(".sort-dropdown__selected"),v=g.querySelector(".sort-dropdown__current"),y=g.querySelectorAll(".sort-dropdown__item"),L=document.querySelector(".header__nav"),S=document.querySelectorAll(".nav__item"),f=document.querySelector(".burger"),q=document.querySelector(".wrapper"),b=document.body,w=document.querySelector(".btn-close_menu"),E=document.querySelector(".filter-container"),h=document.querySelectorAll(".filter__item"),x=document.querySelector(".filter-mobile__button"),k=document.querySelector(".btn-close_filter");let C="price-desc",I="new";e();const $=await i(I);o($),n(l(C,$)),p.addEventListener("click",t=>{t.stopPropagation(),g.classList.toggle("sort-dropdown__active")}),document.addEventListener("click",t=>{g.contains(t.target)||g.classList.remove("sort-dropdown__active")}),y.forEach(t=>{t.addEventListener("click",async()=>{v.textContent=t.textContent,g.classList.remove("sort-dropdown__active"),y.forEach(t=>{t.classList.remove("sort-dropdown__item_selected")}),t.classList.add("sort-dropdown__item_selected"),C=t.dataset.value;const e=await i(I);n(l(C,e))})}),f.addEventListener("click",t=>{(t.target===f||t.target.closest(".burger"))&&(L.classList.toggle("header__nav_active"),q.classList.toggle("menu__active"),b.classList.toggle("stop-scroll"))}),S.forEach(t=>{t.addEventListener("click",()=>{L.classList.toggle("header__nav_active"),q.classList.toggle("menu__active"),b.classList.toggle("stop-scroll")})}),w.addEventListener("click",t=>{(t.target===w||t.target.closest(".btn-close_menu"))&&(L.classList.toggle("header__nav_active"),q.classList.toggle("menu__active"),b.classList.toggle("stop-scroll"))}),x.addEventListener("click",t=>{(t.target===x||t.target.closest(".filter-mobile__button"))&&(E.classList.toggle("filter-container_active"),q.classList.toggle("menu__active"),b.classList.toggle("stop-scroll"))}),h.forEach(t=>{t.addEventListener("change",async t=>{E.classList.remove("filter-container_active"),q.classList.remove("menu__active"),b.classList.remove("stop-scroll"),I=t.target.id;const e=await i(I),c=l(C,e);o(e),n(c)})}),k.addEventListener("click",t=>{(t.target===k||t.target.closest(".btn-close_filter"))&&(E.classList.toggle("filter-container_active"),q.classList.toggle("menu__active"),b.classList.toggle("stop-scroll"))}),new Swiper(".slider .swiper",{loop:!0,autoplay:{delay:5e3},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),s.addEventListener("click",t=>{(t.target===f||t.target.closest(".control__btn_cart"))&&(b.classList.toggle("cart-open"),b.classList.toggle("stop-scroll"))}),d.addEventListener("click",t=>{(t.target===d||t.target.closest(".cart-close"))&&(b.classList.remove("cart-open"),q.classList.remove("menu__active"),b.classList.toggle("stop-scroll"))}),u.addEventListener("click",t=>{const e=t.target;if(e.classList.contains("cart-item__increase")||e.closest(".cart-item__increase")){const t=e.classList.contains("cart-item__increase")?e:e.closest(".cart-item__increase"),s=t.previousElementSibling;s.textContent=parseInt(s.textContent)+1,c(),a(),r(t.closest(".cart-item"),"increase")}else if(e.classList.contains("cart-item__decrease")||e.closest(".cart-item__decrease")){const t=e.classList.contains("cart-item__decrease")?e:e.closest(".cart-item__decrease"),s=t.nextElementSibling,n=parseInt(s.textContent);n>1&&(s.textContent=n-1,c(),a(),r(t.closest(".cart-item"),"decrease"))}else if(e.classList.contains("cart-item__remove")||e.closest(".cart-item__remove")){const t=(e.classList.contains("cart-item__remove")?e:e.closest(".cart-item__remove")).closest(".cart-item");t.remove(),c(),a(),r(t,"remove")}}),m.addEventListener("click",()=>{document.querySelector(".cart-items").innerHTML="",localStorage.removeItem("cart"),c(),a()}),_.forEach(e=>{e.addEventListener("click",e=>{if(e.target.classList.contains("card__add-to-cart")){const c=e.target.closest(".card");console.log(c),t({id:c.dataset.id,name:c.dataset.name,price:c.dataset.price,image:c.dataset.image,quantity:1})}})})})}}});
