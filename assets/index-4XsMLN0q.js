function K(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))e(c);new MutationObserver(c=>{for(const o of c)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&e(u)}).observe(document,{childList:!0,subtree:!0});function t(c){const o={};return c.integrity&&(o.integrity=c.integrity),c.referrerPolicy&&(o.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?o.credentials="include":c.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function e(c){if(c.ep)return;c.ep=!0;const o=t(c);fetch(c.href,o)}})();function N(a){let s=JSON.parse(localStorage.getItem("cart"))||[];const t=s.find(e=>e.id===a.id);t?t.quantity+=1:s.push(a),localStorage.setItem("cart",JSON.stringify(s)),F()}function F(){const a=JSON.parse(localStorage.getItem("cart"))||[],s=document.querySelector(".control__btn_cart");if(s){const t=a.reduce((e,c)=>e+c.quantity,0);s.textContent=t}O()}function O(){const a=JSON.parse(localStorage.getItem("cart"))||[],s=document.querySelector(".cart-items");s&&(s.innerHTML="",a.forEach(t=>{const e=document.createElement("div");e.className="cart-item",e.innerHTML='\n      <div class="cart-item__image">\n        <img src="assets/images/products/'.concat(t.image,'" alt="').concat(t.name,'">\n      </div>\n      <div class="cart-item__info">\n        <div class="cart-item__name">').concat(t.name,'</div>\n        <div class="cart-item__price">').concat(t.price,' ₽</div>\n      </div>\n      <div class="cart-item__controls">\n        <button class="cart-item__decrease" type="button">-</button>\n        <span class="cart-item__quantity">').concat(t.quantity,'</span>\n        <button class="cart-item__increase" type="button">+</button>\n      </div>\n      <button class="cart-item__remove" type="button">\n        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M1 1L13 13M13 1L1 13" stroke="currentColor" stroke-width="2"/>\n        </svg>\n      </button>\n    '),s.appendChild(e)}),_(),g())}function _(){let a=0;document.querySelectorAll(".cart-item").forEach(t=>{const e=t.querySelector(".cart-item__price"),c=t.querySelector(".cart-item__quantity"),o=parseInt(e.textContent.replace(/\D/g,"")),u=parseInt(c.textContent);a+=o*u}),document.querySelector(".cart-total__price").textContent=a+" ₽"}function g(){let a=0;const s=document.querySelector(".control__btn_cart");document.querySelectorAll(".cart-item__quantity").forEach(c=>a+=Number(c.textContent));const e=document.querySelector(".cart-count");e.textContent="".concat(a," товаров"),s.textContent=a}function S(a,s){const t=JSON.parse(localStorage.getItem("cart"))||[],e=a.querySelector(".cart-item__name").textContent,c=t.findIndex(o=>o.name===e);c!==-1&&(s==="increase"?t[c].quantity+=1:s==="decrease"?t[c].quantity-=1:s==="remove"&&t.splice(c,1),localStorage.setItem("cart",JSON.stringify(t)))}const J="687f44aeefe65e5200890472",D="https://".concat(J,".mockapi.io/api/v1/paints"),H=async()=>{try{return(await axios.get(D)).data}catch(a){throw console.error("Error fetching paints:",a),a}},k=document.querySelector(".catalog__products");function b(a){k.innerHTML="";const s=document.createDocumentFragment();a.forEach(t=>{const e=document.createElement("div");e.className="card",e.dataset.product="data-product",e.dataset.id=t.id,e.dataset.name=t.name,e.dataset.price=t.price,e.dataset.image="assets/images/products/".concat(t.image),e.innerHTML='\n      <div class="card__image-container">\n        <img src="assets/images/products/'.concat(t.image,'" alt="').concat(t.alt,'" class="card__image" loading="lazy">\n      </div>\n      <div class="card__content">\n        <p class="card__name">').concat(t.name,'</p>\n        <div class="card__description">\n          <p class="card__price">').concat(t.price,' ₽</p>\n          <button class="card__add-to-cart" type="button" aria-label="Add to cart">+</button>\n        </div>\n      </div>\n    '),e.querySelector(".card__add-to-cart").addEventListener("click",()=>N({id:t.id,name:t.name,price:t.price,image:t.image,quantity:1})),s.appendChild(e)}),k.appendChild(s)}function A(a){const s=a.length;document.querySelector(".count-product").textContent="".concat(s," товар")}async function q(a){return(await H()).filter(e=>e.categories.includes(a))}function C(a,s){let t=[...s];switch(a){case"price-desc":t.sort((e,c)=>c.price-e.price);break;case"price-asc":t.sort((e,c)=>e.price-c.price);break;case"rating-desc":t.sort((e,c)=>c.rating-e.rating);break;case"newest":t.sort((e,c)=>new Date(c.createdAt)-new Date(e.createdAt));break}return t}document.addEventListener("DOMContentLoaded",async function(){const a=document.querySelector(".control__btn_cart"),s=document.querySelector(".cart-close"),t=document.querySelector(".cart-clear"),e=document.querySelectorAll(".card__add-to-cart"),c=document.querySelector(".cart-items"),o=document.querySelector(".sort-dropdown"),u=o.querySelector(".sort-dropdown__selected"),$=o.querySelector(".sort-dropdown__current"),E=o.querySelectorAll(".sort-dropdown__item"),v=document.querySelector(".header__nav"),M=document.querySelectorAll(".nav__item"),y=document.querySelector(".burger"),m=document.querySelector(".wrapper"),d=document.body,h=document.querySelector(".btn-close_menu"),L=document.querySelector(".filter-container"),T=document.querySelectorAll(".filter__item"),w=document.querySelector(".filter-mobile__button"),x=document.querySelector(".btn-close_filter");let p="price-desc",f="new";O();const I=await q(f);A(I);const B=C(p,I);b(B),u.addEventListener("click",r=>{r.stopPropagation(),o.classList.toggle("sort-dropdown__active")}),document.addEventListener("click",r=>{o.contains(r.target)||o.classList.remove("sort-dropdown__active")}),E.forEach(r=>{r.addEventListener("click",async()=>{$.textContent=r.textContent,o.classList.remove("sort-dropdown__active"),E.forEach(l=>{l.classList.remove("sort-dropdown__item_selected")}),r.classList.add("sort-dropdown__item_selected"),p=r.dataset.value;const n=await q(f),i=C(p,n);b(i)})}),y.addEventListener("click",r=>{(r.target===y||r.target.closest(".burger"))&&(v.classList.toggle("header__nav_active"),m.classList.toggle("menu__active"),d.classList.toggle("stop-scroll"))}),M.forEach(r=>{r.addEventListener("click",()=>{v.classList.toggle("header__nav_active"),m.classList.toggle("menu__active"),d.classList.toggle("stop-scroll")})}),h.addEventListener("click",r=>{(r.target===h||r.target.closest(".btn-close_menu"))&&(v.classList.toggle("header__nav_active"),m.classList.toggle("menu__active"),d.classList.toggle("stop-scroll"))}),w.addEventListener("click",r=>{(r.target===w||r.target.closest(".filter-mobile__button"))&&(L.classList.toggle("filter-container_active"),m.classList.toggle("menu__active"),d.classList.toggle("stop-scroll"))}),T.forEach(r=>{r.addEventListener("change",async n=>{L.classList.remove("filter-container_active"),m.classList.remove("menu__active"),d.classList.remove("stop-scroll"),f=n.target.id;const i=await q(f),l=C(p,i);A(i),b(l)})}),x.addEventListener("click",r=>{(r.target===x||r.target.closest(".btn-close_filter"))&&(L.classList.toggle("filter-container_active"),m.classList.toggle("menu__active"),d.classList.toggle("stop-scroll"))}),new Swiper(".slider .swiper",{loop:!0,autoplay:{delay:5e3},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),a.addEventListener("click",r=>{(r.target===y||r.target.closest(".control__btn_cart"))&&(d.classList.toggle("cart-open"),d.classList.toggle("stop-scroll"))}),s.addEventListener("click",r=>{(r.target===s||r.target.closest(".cart-close"))&&(d.classList.remove("cart-open"),m.classList.remove("menu__active"),d.classList.toggle("stop-scroll"))}),c.addEventListener("click",r=>{const n=r.target;if(n.classList.contains("cart-item__increase")||n.closest(".cart-item__increase")){const i=n.classList.contains("cart-item__increase")?n:n.closest(".cart-item__increase"),l=i.previousElementSibling;l.textContent=parseInt(l.textContent)+1,_(),g(),S(i.closest(".cart-item"),"increase")}else if(n.classList.contains("cart-item__decrease")||n.closest(".cart-item__decrease")){const i=n.classList.contains("cart-item__decrease")?n:n.closest(".cart-item__decrease"),l=i.nextElementSibling,P=parseInt(l.textContent);P>1&&(l.textContent=P-1,_(),g(),S(i.closest(".cart-item"),"decrease"))}else if(n.classList.contains("cart-item__remove")||n.closest(".cart-item__remove")){const l=(n.classList.contains("cart-item__remove")?n:n.closest(".cart-item__remove")).closest(".cart-item");l.remove(),_(),g(),S(l,"remove")}}),t.addEventListener("click",()=>{document.querySelector(".cart-items").innerHTML="",localStorage.removeItem("cart"),_(),g()}),e.forEach(r=>{r.addEventListener("click",n=>{if(n.target.classList.contains("card__add-to-cart")){const i=n.target.closest(".card");console.log(i),N({id:i.dataset.id,name:i.dataset.name,price:i.dataset.price,image:i.dataset.image,quantity:1})}})})});export{K as __vite_legacy_guard};
