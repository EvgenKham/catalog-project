function j(){import.meta.url,import("_").catch(()=>1),async function*(){}().next()}(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))a(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function r(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerPolicy&&(s.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?s.credentials="include":e.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(e){if(e.ep)return;e.ep=!0;const s=r(e);fetch(e.href,s)}})();function $(t){let c=JSON.parse(localStorage.getItem("cart"))||[];const r=c.find(a=>a.id===t.id);r?r.quantity+=1:c.push(t),localStorage.setItem("cart",JSON.stringify(c)),O()}function O(){const t=JSON.parse(localStorage.getItem("cart"))||[],c=document.querySelector(".control__btn_cart");if(c){const r=t.reduce((a,e)=>a+e.quantity,0);c.textContent=r}A()}function A(){const t=JSON.parse(localStorage.getItem("cart"))||[],c=document.querySelector(".cart-items"),a="".concat("/catalog-project","/assets/images/");c&&(c.innerHTML="",t.forEach(e=>{const s=document.createElement("div");s.className="cart-item",s.innerHTML='\n      <div class="cart-item__image">\n        <img src="'.concat(a).concat(e.image,'" alt="').concat(e.name,'">\n      </div>\n      <div class="cart-item__info">\n        <div class="cart-item__name">').concat(e.name,'</div>\n        <div class="cart-item__price">').concat(e.price,' ₽</div>\n      </div>\n      <div class="cart-item__controls">\n        <button class="cart-item__decrease" type="button">-</button>\n        <span class="cart-item__quantity">').concat(e.quantity,'</span>\n        <button class="cart-item__increase" type="button">+</button>\n      </div>\n      <button class="cart-item__remove" type="button">\n        <svg width="14" height="14" viewBox="0 0 14 14" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M1 1L13 13M13 1L1 13" stroke="currentColor" stroke-width="2"/>\n        </svg>\n      </button>\n    '),c.appendChild(s)}),g(),p())}function g(){let t=0;document.querySelectorAll(".cart-item").forEach(r=>{const a=r.querySelector(".cart-item__price"),e=r.querySelector(".cart-item__quantity"),s=parseInt(a.textContent.replace(/\D/g,"")),d=parseInt(e.textContent);t+=s*d}),document.querySelector(".cart-total__price").textContent=t+" ₽"}function p(){let t=0;const c=document.querySelector(".control__btn_cart");document.querySelectorAll(".cart-item__quantity").forEach(e=>t+=Number(e.textContent));const a=document.querySelector(".cart-count");a.textContent="".concat(t," товаров"),c.textContent=t}function y(t,c){const r=JSON.parse(localStorage.getItem("cart"))||[],a=t.querySelector(".cart-item__name").textContent,e=r.findIndex(s=>s.name===a);e!==-1&&(c==="increase"?r[e].quantity+=1:c==="decrease"?r[e].quantity-=1:c==="remove"&&r.splice(e,1),localStorage.setItem("cart",JSON.stringify(r)))}const M="687f44aeefe65e5200890472",T="https://".concat(M,".mockapi.io/api/v1/paints"),B=async()=>{try{return(await axios.get(T)).data}catch(t){throw console.error("Error fetching paints:",t),t}},w=document.querySelector(".catalog__products");function b(t){const r="".concat("/catalog-project","/assets/images/");w.innerHTML="";const a=document.createDocumentFragment();t.forEach(e=>{const s=document.createElement("div");s.className="card",s.dataset.product="data-product",s.dataset.id=e.id,s.dataset.name=e.name,s.dataset.price=e.price,s.dataset.image="images/".concat(e.image),s.innerHTML='\n      <div class="card__image-container">\n        <img src="'.concat(r).concat(e.image,'" alt="').concat(e.alt,'" class="card__image" loading="lazy">\n      </div>\n      <div class="card__content">\n        <p class="card__name">').concat(e.name,'</p>\n        <div class="card__description">\n          <p class="card__price">').concat(e.price,' ₽</p>\n          <button class="card__add-to-cart" type="button" aria-label="Add to cart">+</button>\n        </div>\n      </div>\n    '),s.querySelector(".card__add-to-cart").addEventListener("click",()=>$({id:e.id,name:e.name,price:e.price,image:e.image,quantity:1})),a.appendChild(s)}),w.appendChild(a)}function N(t){const c=t.length;document.querySelector(".count-product").textContent="".concat(c," товар")}async function S(t){return(await B()).filter(a=>a.categories.includes(t))}function q(t,c){let r=[...c];switch(t){case"price-desc":r.sort((a,e)=>e.price-a.price);break;case"price-asc":r.sort((a,e)=>a.price-e.price);break;case"rating-desc":r.sort((a,e)=>e.rating-a.rating);break;case"newest":r.sort((a,e)=>new Date(e.createdAt)-new Date(a.createdAt));break}return r}const m=document.querySelector(".sort-dropdown"),F=m.querySelector(".sort-dropdown__selected"),J=m.querySelector(".sort-dropdown__current"),P=m.querySelectorAll(".sort-dropdown__item");let f="price-desc",v="new";F.addEventListener("click",t=>{t.stopPropagation(),m.classList.toggle("sort-dropdown__active")});document.addEventListener("click",t=>{m.contains(t.target)||m.classList.remove("sort-dropdown__active")});P.forEach(t=>{t.addEventListener("click",async()=>{J.textContent=t.textContent,m.classList.remove("sort-dropdown__active"),P.forEach(a=>{a.classList.remove("sort-dropdown__item_selected")}),t.classList.add("sort-dropdown__item_selected"),f=t.dataset.value;const c=await S(v),r=q(f,c);b(r)})});const h=document.querySelector(".header__nav"),D=document.querySelectorAll(".nav__item"),L=document.querySelector(".burger"),_=document.querySelector(".wrapper"),i=document.body,x=document.querySelector(".btn-close_menu");L.addEventListener("click",t=>{(t.target===L||t.target.closest(".burger"))&&(h.classList.toggle("header__nav_active"),_.classList.toggle("menu__active"),i.classList.toggle("stop-scroll"))});D.forEach(t=>{t.addEventListener("click",()=>{h.classList.toggle("header__nav_active"),_.classList.toggle("menu__active"),i.classList.toggle("stop-scroll")})});x.addEventListener("click",t=>{(t.target===x||t.target.closest(".btn-close_menu"))&&(h.classList.toggle("header__nav_active"),_.classList.toggle("menu__active"),i.classList.toggle("stop-scroll"))});const C=document.querySelector(".filter-container"),H=document.querySelectorAll(".filter__item"),I=document.querySelector(".filter-mobile__button"),k=document.querySelector(".btn-close_filter");I.addEventListener("click",t=>{(t.target===I||t.target.closest(".filter-mobile__button"))&&(C.classList.toggle("filter-container_active"),_.classList.toggle("menu__active"),i.classList.toggle("stop-scroll"))});H.forEach(t=>{t.addEventListener("change",async c=>{C.classList.remove("filter-container_active"),_.classList.remove("menu__active"),i.classList.remove("stop-scroll"),v=c.target.id;const r=await S(v),a=q(f,r);N(r),b(a)})});k.addEventListener("click",t=>{(t.target===k||t.target.closest(".btn-close_filter"))&&(C.classList.toggle("filter-container_active"),_.classList.toggle("menu__active"),i.classList.toggle("stop-scroll"))});document.addEventListener("DOMContentLoaded",async function(){const t=document.querySelector(".control__btn_cart"),c=document.querySelector(".cart-close"),r=document.querySelector(".cart-clear"),a=document.querySelectorAll(".card__add-to-cart"),e=document.querySelector(".cart-items");A();const s=await S(v);N(s);const d=q(f,s);b(d),new Swiper(".slider .swiper",{loop:!0,autoplay:{delay:5e3},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}}),t.addEventListener("click",l=>{(l.target===L||l.target.closest(".control__btn_cart"))&&(i.classList.toggle("cart-open"),i.classList.toggle("stop-scroll"))}),c.addEventListener("click",l=>{(l.target===c||l.target.closest(".cart-close"))&&(i.classList.remove("cart-open"),_.classList.remove("menu__active"),i.classList.toggle("stop-scroll"))}),e.addEventListener("click",l=>{const o=l.target;if(o.classList.contains("cart-item__increase")||o.closest(".cart-item__increase")){const n=o.classList.contains("cart-item__increase")?o:o.closest(".cart-item__increase"),u=n.previousElementSibling;u.textContent=parseInt(u.textContent)+1,g(),p(),y(n.closest(".cart-item"),"increase")}else if(o.classList.contains("cart-item__decrease")||o.closest(".cart-item__decrease")){const n=o.classList.contains("cart-item__decrease")?o:o.closest(".cart-item__decrease"),u=n.nextElementSibling,E=parseInt(u.textContent);E>1&&(u.textContent=E-1,g(),p(),y(n.closest(".cart-item"),"decrease"))}else if(o.classList.contains("cart-item__remove")||o.closest(".cart-item__remove")){const u=(o.classList.contains("cart-item__remove")?o:o.closest(".cart-item__remove")).closest(".cart-item");u.remove(),g(),p(),y(u,"remove")}}),r.addEventListener("click",()=>{document.querySelector(".cart-items").innerHTML="",localStorage.removeItem("cart"),g(),p()}),a.forEach(l=>{l.addEventListener("click",o=>{if(o.target.classList.contains("card__add-to-cart")){const n=o.target.closest(".card");console.log(n),$({id:n.dataset.id,name:n.dataset.name,price:n.dataset.price,image:n.dataset.image,quantity:1})}})})});export{j as __vite_legacy_guard};
